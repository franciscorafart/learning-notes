# Elastic Load Balancing & Auto Scaling Groups

## Scaling and Availability
Scale => Application can handle greater loads by adapting

## Scalability - Two kinds:

### Vertical scalability - Scale up / down
- Increase the size of the instance
For example: Scaling a EC2 instance from t2.micro to t2.large
 - Very common for non-distributed systems, such as a database
 - There's a limit (hardware) to how much you can scale

### Horizontal scalability (Elasticity) - Scale out / in (less)
- Increase number of instances for you applications
- Horizontal scaling implies distributed systems
- Very common for web applications

Ex: Auto Scaling Group, Load Balancer

## High availability
- High availability usually goes hand in hand with horizontal scaling
- High availability means you are ruunning application in at least two availability zones
- The goal of high availability is to survive a data center loss (disaster / power outage / earthquake)

Running multiple instances on different availability zones managed by Auto Scaling Group
- Load Balancer in multiple AZ

### Definitions
Scalability: Accomodate large load by scaling up (stronger hardware) or adding nodes (scaling out)
Elasticity: Once a system is scablable, there will be some form of auto-scaling. System scales as a function of the load it is receiving.
Agility: Not related to scalability - distractor. Agile concept.

# Elastic Load Balancer
Server that forward internet traffic to multiple servers downstream (EC2 instances)
- This is what we publicly expose to our users
- BEhind load balancers we will have multiple EC2 instances.

Balances the request load across multiple EC2 instances, so it allows us to scale our backend better.

Why use load balancer?
- Spread load across multiple downstream instances.
- Expose single point of access.
- Regular health checks on instances: Seamlessly handle failures of downstream instances (If an instance is failing Load Balancer wont direct traffic to it)
- Provide SSL termination (HTTPS)
- High availability accross zones

ELB
- Managed load balancer. No provisioning od servers
- AWS takes cares of updates and ensures high availability
- It's cheaper to set up own load balancer, but more effort

## 4 Types of load balancers in AWS

1. Application Load Balancer (Http and Https only, gRPC) - Layer 7
- HTTP routeing features
- Static DNS (static url)
- routes traffic to downstream targets

2. Network Load Balancer (Ultra high performance, allows for TCP) - Layer 4
- TCP and UDP protocol
- High performance: millions of requests per second
- Static Ip through Elastic IP ()
- Same architecture as App Load Balancer, routes traffic to downstream targets

3. Gateway Load Balancer - Layer 3
- GENEVE protocol on IP packages (Layer 3)
- Route traffic to firewalls you manage on EC2 instances
- Intrusion detenction

Architecture: 
- GLB first routes traffic to a 3rd party security virtual applicances so that you can perform checks and firewalls
- Then the virtual applicances send traffic back to GLB
- Finally GLB sends traffic to application

4. Classic Load Balancer (Retired on 2023) - Layer 4 & 7




